# =============================================================================
# Docker Compose Configuration
# =============================================================================
# These variables are used by docker-compose only (not passed to containers)
# Currents application images
# DC_CURRENTS_IMAGE_REPOSITORY=513558712013.dkr.ecr.us-east-1.amazonaws.com/currents/on-prem/
# DC_CURRENTS_IMAGE_TAG=staging
#
# Infrastructure service images (full image reference)
# DC_MONGODB_IMAGE=mongo:8.2.3
# DC_REDIS_IMAGE=redis/redis-stack-server:7.4.0-v8
# DC_CLICKHOUSE_IMAGE=clickhouse/clickhouse-server:25.8
# DC_RUSTFS_IMAGE=rustfs/rustfs:1.0.0-alpha.79
# DC_AWS_CLI_IMAGE=amazon/aws-cli:latest

# =============================================================================
# Data Volume Configuration
# =============================================================================
# By default, data is stored in ./data/<service> (auto-created)
# Set to a custom path or a pre-created Docker volume name
#
# Examples:
#   DC_REDIS_VOLUME=./data/redis          # Local path (default)
#   DC_REDIS_VOLUME=/mnt/ssd/redis        # Custom path
#   DC_REDIS_VOLUME=my_redis_volume       # Pre-created Docker volume
#
# DC_REDIS_VOLUME=./data/redis
# DC_MONGODB_VOLUME=./data/mongodb
# DC_CLICKHOUSE_VOLUME=./data/clickhouse
# DC_RUSTFS_VOLUME=./data/rustfs
# DC_SCHEDULER_STARTUP_VOLUME=./data/startup

# =============================================================================
# Port Configuration
# =============================================================================
# Configure host ports for services. Format: [host_ip:]port
# Currents services default to all interfaces, databases default to localhost only
#
# DC_DIRECTOR_PORT=1234                    # Director API (default: all interfaces)
# DC_API_PORT=4000                         # Dashboard/API (default: all interfaces)
# DC_MONGODB_PORT=127.0.0.1:27017          # MongoDB (default: localhost only)
# DC_REDIS_PORT=127.0.0.1:6379             # Redis (default: localhost only)
# DC_CLICKHOUSE_HTTP_PORT=127.0.0.1:8123   # ClickHouse HTTP (default: localhost only)
# DC_CLICKHOUSE_TCP_PORT=127.0.0.1:9123    # ClickHouse TCP (default: localhost only)
# DC_RUSTFS_S3_PORT=9000                   # RustFS S3 API (default: all interfaces)
# DC_RUSTFS_CONSOLE_PORT=9001              # RustFS Console (default: all interfaces)

# =============================================================================
# URL Configuration
# =============================================================================
# Base URLs for the application
APP_BASE_URL=http://localhost:4000
CURRENTS_RECORD_API_URL=http://localhost:1234

# Derived URLs (built from base URLs)
API_URL=${APP_BASE_URL}/v1
DASHBOARD_URL=${APP_BASE_URL}
AUTOMATED_REPORTS_CURRENTS_DASHBOARD_HOSTNAME=${APP_BASE_URL}

# =============================================================================
# Redis Configuration
# =============================================================================
# Default points to redis service in the compose network
# Change these if using an external Redis instance
REDIS_URI=redis://redis:6379
REDIS_URI_SLAVE=redis://redis:6379

# =============================================================================
# MongoDB Configuration
# =============================================================================
# Connection settings
MONGODB_USERNAME=currents-user
# Password generated by setup.sh
MONGODB_PASSWORD=
MONGODB_DATABASE=currents
MONGODB_URI=mongodb://${MONGODB_USERNAME}:${MONGODB_PASSWORD}@mongodb:27017/${MONGODB_DATABASE}?authSource=admin&replicaSet=rs0

# =============================================================================
# Object Storage (RustFS / S3)
# =============================================================================
# For rustfs when using the full data environment
RUSTFS_ACCESS_KEY=rustfs-access-key
# Run `./scripts/generate-secrets.sh token` from the root of the project to generate a new secret
RUSTFS_SECRET_KEY=rustfs-secret-key
FILE_STORAGE_ENDPOINT="http://localhost:9000"
FILE_STORAGE_INTERNAL_ENDPOINT="http://host.docker.internal:9000"
FILE_STORAGE_ACCESS_KEY_ID=${RUSTFS_ACCESS_KEY}
FILE_STORAGE_SECRET_ACCESS_KEY=${RUSTFS_SECRET_KEY}
FILE_STORAGE_BUCKET="currents"
FILE_STORAGE_FORCE_PATH_STYLE=true

# =============================================================================
# ClickHouse Configuration
# =============================================================================
# Connection settings (uses service name for internal Docker network)
CLICKHOUSE_URL=http://clickhouse:8123
CLICKHOUSE_USERNAME=currents

# Passwords for ClickHouse users (generated by setup.sh)
# Default PASSWORD only used if using the included clickhouse
CLICKHOUSE_DEFAULT_PASSWORD=
# The CURRENTS USER PASSWORD is how all services connect
CLICKHOUSE_CURRENTS_PASSWORD=

# =============================================================================
# Authentication
# =============================================================================
# Run `./scripts/generate-secrets.sh token` from the root of the project to generate a new secret
JWT_SECRET=
JWT_SECRET_EXPIRY=10m

# =============================================================================
# GitLab Integration
# =============================================================================
GITLAB_REDIRECT_URL=${APP_BASE_URL}/integrations/gitlab/callback
# Run `./scripts/generate-secrets key gitlab-key.pem`
# Then `base64 < "gitlab-key.pem" | tr -d '\n'` to get the base64 secret to set here
GITLAB_STATE_SECRET=

# =============================================================================
# Email Configuration
# =============================================================================
EMAIL_TRANSPORTER=smtp
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=test
SMTP_PASS=test

# Automated Reports Configuration
AUTOMATED_REPORTS_EMAIL_FROM="Currents Report <report@example.com>"
AUTOMATED_REPORTS_EMAIL_BCC=

# =============================================================================
# Observability (Optional)
# =============================================================================
# Coralogix support
CORALOGIX_API_ENDPOINT=
CORALOGIX_API_KEY=
CORALOGIX_APP_NAME="customer-name"

# ON_PREM_EMAIL=admin@currents.local
